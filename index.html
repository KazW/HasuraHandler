<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Home - HasuraHandler</title> <link rel="shortcut icon" href="https://kazw.github.io/HasuraHandler/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="https://kazw.github.io/HasuraHandler/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="https://kazw.github.io/HasuraHandler/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="https://kazw.github.io/HasuraHandler/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Home | HasuraHandler</title> <meta name="generator" content="Jekyll v4.1.1" /> <meta property="og:title" content="Home" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="HasuraHandler is a Rails framework that makes building microservices for Hasura easy. HasuraHandler also simplifies adding Hasura to an existing Rails stack." /> <meta property="og:description" content="HasuraHandler is a Rails framework that makes building microservices for Hasura easy. HasuraHandler also simplifies adding Hasura to an existing Rails stack." /> <link rel="canonical" href="https://kazw.github.io/HasuraHandler/" /> <meta property="og:url" content="https://kazw.github.io/HasuraHandler/" /> <meta property="og:site_name" content="HasuraHandler" /> <script type="application/ld+json"> {"description":"HasuraHandler is a Rails framework that makes building microservices for Hasura easy. HasuraHandler also simplifies adding Hasura to an existing Rails stack.","@type":"WebSite","url":"https://kazw.github.io/HasuraHandler/","name":"HasuraHandler","headline":"Home","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="https://kazw.github.io/HasuraHandler/" class="site-title lh-tight"> HasuraHandler </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search HasuraHandler" aria-label="Search HasuraHandler" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/KazW/HasuraHandler" class="site-button" > HasuraHandler on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 class="fs-9" id="build-realtime-graphql-rails-apps"> <a href="#build-realtime-graphql-rails-apps" aria-labelledby="build-realtime-graphql-rails-apps" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Build Realtime GraphQL Rails Apps </h1> <p class="fs-6 fw-300">HasuraHandler is a Rails framework that makes building microservices for Hasura easy. HasuraHandler also simplifies adding Hasura to an existing Rails app.</p> <p><a href="https://hasura.io/docs/1.0/graphql/manual/index.html" class="btn fs-5 mb-4 mb-md-0">Learn about Hasura</a> <a href="#quick-start" class="btn btn-primary fs-5 mb-4 mb-md-0 mr-2">Get Started</a></p> <hr /> <p><img src="https://badge.fury.io/rb/hasura_handler.svg" alt="Gem Version" /> <a href="https://github.com/KazW/HasuraHandler/actions?query=workflow%3Atests"><img src="https://github.com/KazW/HasuraHandler/workflows/tests/badge.svg" alt="tests" /></a> <a href="https://codeclimate.com/github/KazW/HasuraHandler/maintainability"><img src="https://api.codeclimate.com/v1/badges/38864d7565ab11729b6b/maintainability" alt="Maintainability" /></a> <a href="https://codeclimate.com/github/KazW/HasuraHandler/test_coverage"><img src="https://api.codeclimate.com/v1/badges/38864d7565ab11729b6b/test_coverage" alt="Test Coverage" /></a></p> <h2 id="summary"> <a href="#summary" aria-labelledby="summary" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Summary </h2> <p>HasuraHandler is a Rails engine, by default it will add 2 routes where it is mounted; one for actions, one for events. Actions allow you to return information to a GraphQL query/mutation, such as verifying a usename/password and generating a login token. Events allow you to receive information and react to it accordingly, such as sending an updated record to a search backend/provider for indexing.</p> <h2 id="what-can-hasura-do"> <a href="#what-can-hasura-do" aria-labelledby="what-can-hasura-do" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What can Hasura do? </h2> <p>When using Hasura as part of a Rails app, Hasura can act as several pieces of infrastructure:</p> <ul> <li>A GraphQL API gateway that supports subscriptions over websockets.</li> <li>An internal event-based webhook service that delivers records to endpoints when theyâ€™re insertted/updated/deleted.</li> <li>As a data access layer where services use it as a master data store.</li> <li>An internal webhook scheduling service that can deliver one-off or recurring events to endpoints.</li> </ul> <p>Since Hasura can be used in so many ways, it can be added to an application stack incrementally for existing Rails apps. For new Rails apps, considering ways to use this functionality can radically alter the way you think about building and architecting your app.</p> <h2 id="quick-start"> <a href="#quick-start" aria-labelledby="quick-start" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Quick Start </h2> <ol> <li>Add the gem to your project <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gem</span> <span class="s1">'hasura_handler'</span><span class="p">,</span> <span class="s1">'~&gt; 0.1.0'</span>
</code></pre></div> </div> </li> <li>Create <code class="language-plaintext highlighter-rouge">config/initializers/hasura_handler.rb</code>: <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">HasuraHandler</span><span class="p">.</span><span class="nf">setup</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">auth_key</span> <span class="o">=</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'HASURA_SERVICE_KEY'</span><span class="p">]</span> <span class="o">||</span> <span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">credentials</span><span class="p">.</span><span class="nf">hasura_service_key</span>
<span class="k">end</span>
</code></pre></div> </div> </li> <li>Create the following directories: <ul> <li><code class="language-plaintext highlighter-rouge">app/actions</code></li> <li><code class="language-plaintext highlighter-rouge">app/reactions</code></li> </ul> </li> <li>Add routes in <code class="language-plaintext highlighter-rouge">config/routes.rb</code>: <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mount</span> <span class="no">HasuraHandler</span><span class="o">::</span><span class="no">Engine</span> <span class="o">=&gt;</span> <span class="s1">'/hasura'</span>
</code></pre></div> </div> </li> <li> <p>Create event trigger in Hasura: <strong>TODO</strong></p> </li> <li>Create event reaction in <code class="language-plaintext highlighter-rouge">app/reactions/welcome_user.rb</code>: <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">class</span> <span class="nc">WelcomeUser</span> <span class="o">&lt;</span> <span class="no">HasuraHandler</span><span class="o">::</span><span class="no">EventHandler</span>
   <span class="n">match_by</span> <span class="ss">trigger: </span><span class="s1">'user_inserted'</span>

   <span class="k">def</span> <span class="nf">run</span>
     <span class="no">Rails</span><span class="p">.</span><span class="nf">logger</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="s1">'A new user signed up!'</span><span class="p">)</span>
   <span class="k">end</span>
 <span class="k">end</span>
</code></pre></div> </div> </li> </ol> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0">&copy; 2020 Kaz Walker. Distributed under the <a href="https://github.com/KazW/HasuraHandler/tree/master/MIT-LICENSE">MIT license.</a></p> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
